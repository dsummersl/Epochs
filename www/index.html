<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Epoch Converter</title>

		<script type="text/javascript" language="JavaScript" src="astro.js"></script>
		<script type="text/javascript" language="JavaScript" src="calendar.js"></script>

		<style type="text/css" media="screen">
			#results li {
				background: #eee;
			}
			#convertFrom li {
				background: #ffff88;
			}
			#convertTo li {
				background: #ffff88;
			}
			ul li input[type="number"] {
				color: #777;
				border: 0;
				font: normal 17px "Helvetica Neue", Helvetica;
				padding: 0;
				display: inline-block;
				margin-left: 0px;
				width: 100%;
				-webkit-appearance: textarea;
			}
		</style>

		<style type="text/css" media="screen">@import "jqtouch-1.2/jqtouch/jqtouch.min.css";</style>
		<style type="text/css" media="screen">@import "jqtouch-1.2/themes/apple/theme.min.css";</style>
		<script src="jqtouch-1.2/jqtouch/jquery.1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="jqtouch-1.2/jqtouch/jqtouch.min.js" type="application/x-javascript" charset="utf-8"></script>

		<script src="helpers.js" type="application/x-javascript" charset="utf-8"></script>

		<!-- testing frameworks -->
		<link type="text/css" rel="stylesheet" href="test/calendrical/spec/lib/jspec.css" />
		<script src="test/calendrical/spec/lib/jspec.js"></script>
		<script src="test/calendrical/spec/lib/jspec.xhr.js"></script>
		<script src="test/calendrical/spec/lib/jspec.jquery.js"></script>

		<script type="text/javascript" charset="utf-8">
			var jQT = $.jQTouch({
			});
			$(function() {
					var debug = true;
					$('#gyear, #gmonth, #gday').change(gregorianfunction);
					$('#jday').change(julianfunction);
					$('#julianform').submit(julianfunction);
					$('#gregorianform').submit(gregorianfunction);

					$('#forms').hide();
					$('#forms input[type=submit]').hide();
					makeList($('#convertFrom'),'fromSelection');
					makeList($('#convertTo'),'toSelection','gregorian');
					$('#fromSelection').change(function () {
						setForm($('#fromForm'),$('#fromSelection').find(':selected').attr('value'));
						setAllCalendars(thedate);
					});
					$('#toSelection').change(function () {
						$(this).log("selecting to");
					});
					setForm($('#fromForm'),$('#fromSelection').find(':selected').attr('value'));

					// setup the initial values to today's date:
					setAllCalendars(thedate);
					gregorianfunction();

					if (debug) { // {{{
						var jspec = JSpec.exec('test/calendrical/spec/unit/spec.js')
						.run({ fixturePath: 'test/calendrical/spec/fixtures' });

						if (jspec.stats.failures > 0) {
							var html = '';
							html += '<ul class="rounded">';
							html += '<li>';
							html += '<div id="jspec-top"><h2 id="jspec-title">JSpec <em>'+ JSpec.version +'</em></h2></div>';
							html += '<div id="jspec"></div>';
							html += '<div id="jspec-bottom"></div>';
							html += '</li>';
							html += '</ul>';
							$('#results').append($(html));
							jspec.report();
						}
					} // }}}
			});
		</script>
	</head>
	<body>
		<div id="home">
			<div class="toolbar">
				<h1>Epochs</h1>
				<!--<a href="#info" class="button leftButton flip">Info</a>-->
				<!--<a href="#add" class="button add slideup">+</a>-->
			</div>
			<div id="convertFrom"></div>
			<div id="fromForm"></div>
			<hr />
			<div id="convertTo"></div>
			<div id="results">
			</div>
		</div>
		<div id="forms">
			<div id="gregorianform"><!--{{{-->
				<form id="gtime">
					<ul class="rounded">
						<li><select name="month" id="gmonth">
							<!--<option value="0.0" selected>(GMT) Western Europe Time</option>-->
							<option value="1">January</option>
							<option value="2">Febuary</option>
							<option value="3">March</option>
							<option value="4">April</option>
							<option value="5">May</option>
							<option value="6">June</option>
							<option value="7">July</option>
							<option value="8">August</option>
							<option value="9">September</option>
							<option value="10">October</option>
							<option value="11">November</option>
							<option value="12">December</option>
						</select></li>
						<!-- TODO determine the proper number of days for the given month/year -->
						<li><select name="day" id="gday">
							<option value="1">1</option>
							<option value="2">2</option>
							<option value="3">3</option>
							<option value="4">4</option>
							<option value="5">5</option>
							<option value="6">6</option>
							<option value="7">7</option>
							<option value="8">8</option>
							<option value="9">9</option>
							<option value="10">10</option>
							<option value="11">11</option>
							<option value="12">12</option>
							<option value="13">13</option>
							<option value="14">14</option>
							<option value="15">15</option>
							<option value="16">16</option>
							<option value="17">17</option>
							<option value="18">18</option>
							<option value="19">19</option>
							<option value="20">20</option>
							<option value="21">21</option>
							<option value="22">22</option>
							<option value="23">23</option>
							<option value="24">24</option>
							<option value="25">25</option>
							<option value="26">26</option>
							<option value="27">27</option>
							<option value="28">28</option>
							<option value="29">29</option>
							<option value="30">30</option>
							<option value="31">31</option>
						</select></li>
						<li><input type="number" id="gyear" name="year" placeholder="year"></li>
					</ul>
					<input type="submit" href="#" onclick='return false;'></input>
				</form>
			</div><!--}}}-->
			<div id="julianform"><!--{{{-->
				<form id="jtime">
					<ul class="rounded">
						<li><input type="number" id="jday" name="day" placeholder="day"></li>
					</ul>
					<input type="submit" href="#" onclick='return false;'></input>
				</form>
			</div><!--}}}-->
		</div>
	</body>
	<!-- vim: set fdm=marker ai: -->
</html>
